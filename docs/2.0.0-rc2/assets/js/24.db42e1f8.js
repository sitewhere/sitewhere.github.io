(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{171:function(e,t,a){"use strict";a.r(t);var n=a(1),s=Object(n.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e._m(0),e._v(" "),a("p",[e._v("The instance management microservice is used to bootstrap a SiteWhere instance and is\nrequired to be present when starting an uninitialized SiteWhere instance. The instance\nmanagement microservice also manages updates to global instance settings such as shared\ndatabase and connector configurations.")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),a("p",[a("a",{attrs:{href:"http://sitewhere.io/schema/sitewhere/microservice/instance-management/current/instance-management.xsd",target:"_blank",rel:"noopener noreferrer"}},[e._v("Instance Management Configuration XML Schema"),a("OutboundLink")],1)]),e._v(" "),e._m(4),e._v(" "),e._m(5),e._m(6),e._v(" "),a("p",[e._v("The instance management microservice is responsible for connecting to Zookeeper and\ncreating the base tree where all other configuration data for the instance is stored.\nFor more information about connectivity to Zookeeper and how the base of the configuration\ntree is populated, see the "),a("router-link",{attrs:{to:"./../zookeeper-configuration.html"}},[e._v("Apache Zookeper configuration guide")]),e._v(".")],1),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._m(10),e._v(" "),a("p",[e._v("Additional instance templates may be added by mounting them into the filesystem of the\ninstance management Docker image under the templates folder.")]),e._v(" "),e._m(11),e._v(" "),a("p",[e._v("The following environment variable is used to indicate which template\nwill be used for initialization:")]),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),e._m(16)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"instance-management-microservice"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#instance-management-microservice","aria-hidden":"true"}},[this._v("#")]),this._v(" Instance Management Microservice")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"microservice-dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#microservice-dependencies","aria-hidden":"true"}},[this._v("#")]),this._v(" Microservice Dependencies")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("strong",[this._v("User Management")]),this._v(" - Required in order to bootstrap default system users based on the\nchosen instance template.")]),this._v(" "),t("li",[t("strong",[this._v("Tenant Management")]),this._v(" - Required in order to bootstrap default system tenants based on\nthe chosen instance template.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"configuration-schema"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration-schema","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration Schema")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"example-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Example Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C:\\Users\\Derek\\Documents\\GitHub\\sitewhere-documentation/docs/guide/microservices/instance-management.xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("Not found: C")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"zookeeper-bootstrapping"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-bootstrapping","aria-hidden":"true"}},[this._v("#")]),this._v(" Zookeeper Bootstrapping")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"instance-templates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#instance-templates","aria-hidden":"true"}},[this._v("#")]),this._v(" Instance Templates")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("An "),t("em",[this._v("instance template")]),this._v(" is used to specify the scripts that will be executed to populate the\ndefault users and tenants for the instance. A list of instance templates is packaged as part\nof the Docker image for the instance management microservice. Each template has a JSON descriptor\nthat includes a unique id which may be passed if the instance is to be initialized by that\ntemplate's scripts. Below is an example of the JSON descriptor:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C:\\Users\\Derek\\Documents\\GitHub\\sitewhere-documentation/docs/guide/microservices/instance-template.json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("Not found: C")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"adding-a-custom-instance-template"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adding-a-custom-instance-template","aria-hidden":"true"}},[this._v("#")]),this._v(" Adding a Custom Instance Template")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"changing-the-instance-template"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changing-the-instance-template","aria-hidden":"true"}},[this._v("#")]),this._v(" Changing the Instance Template")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",[a("thead",[a("tr",[a("th",[e._v("Setting")]),e._v(" "),a("th",[e._v("Environment Variable")]),e._v(" "),a("th",[e._v("Default Value")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Instance Template Id")]),e._v(" "),a("td",[e._v("sitewhere.instance.template.id")]),e._v(" "),a("td",[e._v("default")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("default")]),e._v(" template that is packaged in the Docker image loads the default "),a("code",[e._v("admin")]),e._v(" and\n"),a("code",[e._v("noadmin")]),e._v(" users normally expected in a new system along with a default tenant based on\nthe "),a("code",[e._v("mongo")]),e._v(" tenant template and "),a("code",[e._v("construction")]),e._v(" dataset.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"instance-data-boostrapping"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#instance-data-boostrapping","aria-hidden":"true"}},[this._v("#")]),this._v(" Instance Data Boostrapping")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If no "),t("code",[this._v("bootstrapped")]),this._v(" marker is found in the "),t("code",[this._v("state")]),this._v(" subfolder of Zookeeper for\nthe instance, the instance management microservice will attempt to use the instance\ntemplate to bootstrap the user and tenant data. It waits for the user and tenant\nmanagement microservices to start before running the scripts which push data via\nthe respective APIs.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Once the initialization scripts have run, the instance is considered to be initialized and\na "),t("code",[this._v("bootstrapped")]),this._v(" marker is pushed to Zookeeper to prevent re-running the scripts every\ntime the instance starts. Removing the marker will cause the instance template data to be\nloaded over the existing data, which may cause problems with duplicate key exceptions.")])}],!1,null,null,null);s.options.__file="instance-management.md";t.default=s.exports}}]);