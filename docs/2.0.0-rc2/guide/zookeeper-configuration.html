<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Apache Zookeeper Configuration | SiteWhere</title>
    <meta name="description" content="SiteWhere CE 2.0.0-RC2 Documentation">
    
    
    <link rel="preload" href="/docs/2.0.0-rc2/assets/css/0.styles.4b8fa1c2.css" as="style"><link rel="preload" href="/docs/2.0.0-rc2/assets/js/app.37c58381.js" as="script"><link rel="preload" href="/docs/2.0.0-rc2/assets/js/25.db1b249a.js" as="script"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/15.cebab772.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/2.afb7252f.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/3.bfb81d55.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/4.b6f4519d.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/5.59ede072.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/6.c138f168.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/7.adcf453d.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/8.80173e00.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/9.cb98154c.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/10.fd27a369.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/11.51e83dc9.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/12.7dbaf8d4.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/13.d6eac997.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/14.d953024d.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/16.5a1a00e7.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/17.1b790335.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/18.da9f1def.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/19.d81bee4e.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/20.cded3432.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/21.b5c12c97.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/22.80ea4b39.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/23.cf39a4d1.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/24.db42e1f8.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/26.7f2ab2e1.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/27.17a4ebb2.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/28.6fe21b30.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/29.0c9ceb81.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/30.ba35881e.js"><link rel="prefetch" href="/docs/2.0.0-rc2/assets/js/31.9532abde.js">
    <link rel="stylesheet" href="/docs/2.0.0-rc2/assets/css/0.styles.4b8fa1c2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/2.0.0-rc2/" class="home-link router-link-active"><img src="/docs/2.0.0-rc2/images/logo.png" alt="SiteWhere" class="logo"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/2.0.0-rc2/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.0.0-rc2/guide/" class="nav-link router-link-active">User Guide</a></div><div class="nav-item"><a href="/docs/2.0.0-rc2/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><a href="/docs/2.0.0-rc2/development/" class="nav-link">Development</a></div><div class="nav-item"><a href="https://github.com/sitewhere/sitewhere" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0-rc2/guide/zookeeper-configuration.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0-rc2/es/guide/zookeeper-configuration.html" class="nav-link">Español</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/2.0.0-rc2/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.0.0-rc2/guide/" class="nav-link router-link-active">User Guide</a></div><div class="nav-item"><a href="/docs/2.0.0-rc2/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><a href="/docs/2.0.0-rc2/development/" class="nav-link">Development</a></div><div class="nav-item"><a href="https://github.com/sitewhere/sitewhere" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0-rc2/guide/zookeeper-configuration.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0-rc2/es/guide/zookeeper-configuration.html" class="nav-link">Español</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/2.0.0-rc2/guide/" class="sidebar-link">SiteWhere User Guide</a></li><li><a href="/docs/2.0.0-rc2/guide/zookeeper-configuration.html" class="active sidebar-link">Apache Zookeeper Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/2.0.0-rc2/guide/zookeeper-configuration.html#zookeeper-connectivity" class="sidebar-link">Zookeeper Connectivity</a></li></ul></li><li><a href="/docs/2.0.0-rc2/guide/kafka-configuration.html" class="sidebar-link">Apache Kafka Configuration</a></li><li><a href="/docs/2.0.0-rc2/guide/microservices/instance-management.html" class="sidebar-link">Instance Management Microservice</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="apache-zookeeper-configuration"><a href="#apache-zookeeper-configuration" aria-hidden="true" class="header-anchor">#</a> Apache Zookeeper Configuration</h1> <p><a href="https://zookeeper.apache.org/" target="_blank" rel="noopener noreferrer">Apache ZooKeeper<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used for centralized configuration
management in SiteWhere microservices. It supports storage of configuration data in a
high-performance, reliable tree structure and may be clustered to offer high availability
and reliability.</p> <h2 id="zookeeper-connectivity"><a href="#zookeeper-connectivity" aria-hidden="true" class="header-anchor">#</a> Zookeeper Connectivity</h2> <p>All SiteWhere microservices rely on Zookeeper to provide configuration information
at runtime. The microservices use the following environment variables and default
values for connecting to Zookeeper:</p> <table><thead><tr><th>Setting</th> <th>Environment Variable</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Zookeeper Host</td> <td>sitewhere.zookeeper.host</td> <td>localhost</td></tr> <tr><td>Zookeeper Port</td> <td>sitewhere.zookeeper.port</td> <td>2181</td></tr></tbody></table> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>The Docker Compose configuration should pass a Zookeeper hostname that can be resolved
on the Docker network that the microservices are attached to. Note that the Zookeeper
environment variables must be passed for every microservice.</p></div> <p>Once connected to Zookeeper, the instance management microservice is responsible
for creating the base of the instance Zookeeper tree based on the following
variables and default values:</p> <table><thead><tr><th>Setting</th> <th>Environment Variable</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Product Id</td> <td>sitewhere.product.id</td> <td>sitewhere</td></tr> <tr><td>Instance Id</td> <td>sitewhere.instance.id</td> <td>sitewhere1</td></tr></tbody></table> <p>For the default system values, the Zookeeper tree will be rooted at <code>sitewhere/sitewhere1</code>
and all other instance configuration data will be located relative to that root. If
multiple instances of SiteWhere are to be run concurrently using the same Zookeeper cluster,
they should provide different values for <code>sitewhere.instance.id</code> so that the configuration data
does not overlap. This can be accomplished by setting the <code>sitewhere.instance.id</code>
environment variable via the Docker Compose configuration.</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>All of the microservices intended to run in the same instance should use the same
values for <code>sitewhere.product.id</code> and <code>sitewhere.instance.id</code>.</p></div> <p>If using Zookeeper within a Docker Compose configuration, the Zookeeper data folder
should be mapped to a local volume so that it is not lost when the service is
stopped. The SiteWhere infrastructure recipes have a common shared data volume
that is used to store persistent data from all services such as Zookeeper,
Kafka, and various databases. The data volume may be deleted in order to start
with a &quot;clean&quot; system.</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/11/2018, 7:46:25 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/2.0.0-rc2/guide/" class="prev router-link-active">
          SiteWhere User Guide
        </a></span> <span class="next"><a href="/docs/2.0.0-rc2/guide/kafka-configuration.html">
          Apache Kafka Configuration
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/docs/2.0.0-rc2/assets/js/25.db1b249a.js" defer></script><script src="/docs/2.0.0-rc2/assets/js/app.37c58381.js" defer></script>
  </body>
</html>
