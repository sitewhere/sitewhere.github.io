<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tenant Management Microservice | SiteWhere</title>
    <meta name="description" content="SiteWhere CE 2.0.0 Documentation">
    <link rel="icon" href="/docs/2.0.0/images/favicon.png">
    
    <link rel="preload" href="/docs/2.0.0/assets/css/0.styles.523cf4aa.css" as="style"><link rel="preload" href="/docs/2.0.0/assets/js/app.cfa2c112.js" as="script"><link rel="preload" href="/docs/2.0.0/assets/js/64.a2ab4165.js" as="script"><link rel="prefetch" href="/docs/2.0.0/assets/js/23.588c3d85.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/2.51a7a63e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/3.1a822c12.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/4.856fab00.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/5.b1805555.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/6.868dfd49.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/7.b502a43e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/8.93dea270.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/9.f464343f.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/10.02662cf0.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/11.33aa63b2.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/12.f8234bd4.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/13.7cee05b0.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/14.be2f73f3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/15.d386e8c3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/16.46b16051.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/17.d949781d.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/18.d75c1c58.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/19.21043226.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/20.e78c4509.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/21.dd496b72.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/22.81471192.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/24.d6845b74.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/25.e7935013.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/26.14f38e79.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/27.20796f60.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/28.09f588e1.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/29.006ceecc.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/30.c9323ea3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/31.c3344e46.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/32.b14bddbb.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/33.1b016a61.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/34.54f283e6.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/35.cc2cb199.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/36.9bf158ce.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/37.2ebda301.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/38.cc245218.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/39.992db8aa.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/40.e1fccad2.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/41.c7a8fa25.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/42.e8dc10e8.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/43.09f4fcbd.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/44.b2a2cef3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/45.d04fda16.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/46.71e4a747.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/47.982327d8.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/48.7c2a4328.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/49.806a2a2f.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/50.077538ce.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/51.74f0ee87.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/52.5388990c.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/53.cdc07629.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/54.7b7e5a97.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/55.73133064.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/56.86fe5251.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/57.defb81ce.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/58.601d4465.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/59.a85e896f.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/60.b7183a1f.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/61.07d4c618.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/62.99338a61.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/63.6f6ee8fd.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/65.ae2b71a2.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/66.207d06a5.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/67.0b8377dd.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/68.3a35764c.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/69.bd6da76a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/70.62f9c85c.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/71.5af6f675.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/72.df49808c.js">
    <link rel="stylesheet" href="/docs/2.0.0/assets/css/0.styles.523cf4aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/2.0.0/" class="home-link router-link-active"><img src="/docs/2.0.0/images/logo.svg" alt="SiteWhere" class="logo"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/2.0.0/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.0.0/guide/" class="nav-link router-link-active">User Guide</a></div><div class="nav-item"><a href="/docs/2.0.0/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><a href="/docs/2.0.0/development/" class="nav-link">Development</a></div><div class="nav-item"><a href="https://github.com/sitewhere/sitewhere" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0/guide/microservices/tenant-management.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0/es/guide/microservices/tenant-management.html" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/2.0.0/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.0.0/guide/" class="nav-link router-link-active">User Guide</a></div><div class="nav-item"><a href="/docs/2.0.0/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><a href="/docs/2.0.0/development/" class="nav-link">Development</a></div><div class="nav-item"><a href="https://github.com/sitewhere/sitewhere" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0/guide/microservices/tenant-management.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0/es/guide/microservices/tenant-management.html" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/docs/2.0.0/guide/microservices/asset-management.html" class="sidebar-link">Asset Management Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/batch-operations.html" class="sidebar-link">Batch Operations Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/command-delivery.html" class="sidebar-link">Command Delivery Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/device-management.html" class="sidebar-link">Device Management Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/device-registration.html" class="sidebar-link">Device Registration Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/device-state.html" class="sidebar-link">Device State Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/event-management.html" class="sidebar-link">Event Management Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/event-search.html" class="sidebar-link">Event Search Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/event-sources.html" class="sidebar-link">Event Sources Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/inbound-processing.html" class="sidebar-link">Inbound Processing Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/instance-management.html" class="sidebar-link">Instance Management Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/label-generation.html" class="sidebar-link">Label Generation Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/outbound-connectors.html" class="sidebar-link">Outbound Connectors Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/rule-processing.html" class="sidebar-link">Rule Processing Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/schedule-management.html" class="sidebar-link">Schedule Management Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/streaming-media.html" class="sidebar-link">Streaming Media Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/tenant-management.html" class="active sidebar-link">Tenant Management Microservice</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/2.0.0/guide/microservices/tenant-management.html#microservice-dependencies" class="sidebar-link">Microservice Dependencies</a></li><li class="sidebar-sub-header"><a href="/docs/2.0.0/guide/microservices/tenant-management.html#configuration-schema" class="sidebar-link">Configuration Schema</a></li></ul></li><li><a href="/docs/2.0.0/guide/microservices/user-management.html" class="sidebar-link">User Management Microservice</a></li><li><a href="/docs/2.0.0/guide/microservices/web-rest.html" class="sidebar-link">Web/REST Microservice</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="tenant-management-microservice"><a href="#tenant-management-microservice" aria-hidden="true" class="header-anchor">#</a> Tenant Management Microservice</h1> <p>The global tenant management microservice provides the core APIs and data persistence for
managing system tenants. It is initially used by the instance management microservice
to bootstrap the system with base tenants. Afterward, it is called by the Web/REST
microservice to allow the list of system tenants to be managed.</p> <p>When a tenant is added/updated/deleted, the tenant data is pushed to a Kafka topic
so that other interested listeners can act on the update. By default, a listener is
registered to boostrap newly created tenants by adding the expected tenant configuration
hierarchy in ZooKeeper. This process includes copying the per-microservice XML configuration
files from the tenant template into ZooKeeper, then executing the list of initialization
scripts included with the template. Once this process is complete, the tenant configuration
is marked as boostrapped so that other microservices can react to the added tenant. For
instance, the device management microservice will notice that a new tenant has been configured
and will wait for the bootstrapped indicator, then will load the device-management.xml
configuration file to initialize a new device management tenant engine for the added tenant.
Any time that files within a tenant are changed, the changes are broadcast to tenant engines
running on all other microservices so they can react to the changes. In the previous example,
if multiple device management microservices are running (scale &gt; 1), each microservice will
detect the updates and reload the tenant engines to reflect the updates.</p> <h2 id="microservice-dependencies"><a href="#microservice-dependencies" aria-hidden="true" class="header-anchor">#</a> Microservice Dependencies</h2> <ul><li><strong>Instance Management</strong> - Required to initially bootstrap Zookeeper data.</li></ul> <h2 id="configuration-schema"><a href="#configuration-schema" aria-hidden="true" class="header-anchor">#</a> Configuration Schema</h2> <p><a href="http://sitewhere.io/schema/sitewhere/microservice/tenant-management/current/tenant-management.xsd" target="_blank" rel="noopener noreferrer">Tenant Management Configuration XML Schema<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="example-configuration"><a href="#example-configuration" aria-hidden="true" class="header-anchor">#</a> Example Configuration</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>ds</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://sitewhere.io/schema/sitewhere/microservice/common/datastore<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>tm</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://sitewhere.io/schema/sitewhere/microservice/tenant-management<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>
           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
           http://sitewhere.io/schema/sitewhere/microservice/common/datastore http://sitewhere.io/schema/sitewhere/microservice/common/current/datastore-common.xsd
           http://sitewhere.io/schema/sitewhere/microservice/tenant-management http://sitewhere.io/schema/sitewhere/microservice/tenant-management/current/tenant-management.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!-- Tenant Management Configuration --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tm:</span>tenant-management</span><span class="token punctuation">&gt;</span></span>

		<span class="token comment">&lt;!-- Use global MongoDB configuration --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ds:</span>device-management-datastore</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ds:</span>mongodb-datastore-reference</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>global<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ds:</span>device-management-datastore</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tm:</span>tenant-management</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sitewhere/sitewhere-documentation/edit/master/docs/guide/microservices/tenant-management.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/18/2018, 4:14:33 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/2.0.0/guide/microservices/streaming-media.html" class="prev">
          Streaming Media Microservice
        </a></span> <span class="next"><a href="/docs/2.0.0/guide/microservices/user-management.html">
          User Management Microservice
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/docs/2.0.0/assets/js/64.a2ab4165.js" defer></script><script src="/docs/2.0.0/assets/js/app.cfa2c112.js" defer></script>
  </body>
</html>
