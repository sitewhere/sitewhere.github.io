<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Instance Management Microservice | SiteWhere</title>
    <meta name="description" content="SiteWhere CE 2.0.0 Documentation">
    <link rel="icon" href="/docs/2.0.0/images/favicon.png">
    
    <link rel="preload" href="/docs/2.0.0/assets/css/0.styles.523cf4aa.css" as="style"><link rel="preload" href="/docs/2.0.0/assets/js/app.05b16dea.js" as="script"><link rel="preload" href="/docs/2.0.0/assets/js/26.f5670e2e.js" as="script"><link rel="prefetch" href="/docs/2.0.0/assets/js/4.856fab00.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/2.51a7a63e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/3.421b0cf9.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/5.137c44c7.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/6.d07c38bf.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/7.ed01dfab.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/8.d630cc7a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/9.2dbfea6f.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/10.ddaad0cb.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/11.6c4c30d9.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/12.9822119d.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/13.9a1bac1a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/14.8b1006ec.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/15.84f440e0.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/16.8b4887ed.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/17.becff75e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/18.08b4eef3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/19.2e3047cb.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/20.d82ca3eb.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/21.adc0168b.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/22.38aef7c2.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/23.2535cc39.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/24.05a0f53f.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/25.cc91b7f1.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/27.08cfeae3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/28.611725f5.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/29.2c24446d.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/30.ae8acacb.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/31.5d55c0ff.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/32.0d6ce126.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/33.a3b3b6f5.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/34.722a331d.js">
    <link rel="stylesheet" href="/docs/2.0.0/assets/css/0.styles.523cf4aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/2.0.0/" class="home-link router-link-active"><img src="/docs/2.0.0/images/logo.svg" alt="SiteWhere" class="logo"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/2.0.0/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.0.0/guide/" class="nav-link router-link-active">User Guide</a></div><div class="nav-item"><a href="/docs/2.0.0/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><a href="/docs/2.0.0/development/" class="nav-link">Development</a></div><div class="nav-item"><a href="https://github.com/sitewhere/sitewhere" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0/guide/microservices/instance-management.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0/es/guide/microservices/instance-management.html" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/2.0.0/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.0.0/guide/" class="nav-link router-link-active">User Guide</a></div><div class="nav-item"><a href="/docs/2.0.0/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><a href="/docs/2.0.0/development/" class="nav-link">Development</a></div><div class="nav-item"><a href="https://github.com/sitewhere/sitewhere" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0/guide/microservices/instance-management.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0/es/guide/microservices/instance-management.html" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/docs/2.0.0/guide/" class="sidebar-link">SiteWhere User Guide</a></li><li><a href="/docs/2.0.0/guide/zookeeper-configuration.html" class="sidebar-link">Apache Zookeeper Configuration</a></li><li><a href="/docs/2.0.0/guide/kafka-configuration.html" class="sidebar-link">Apache Kafka Configuration</a></li><li><a href="/docs/2.0.0/guide/sending-data.html" class="sidebar-link">Sending Data to SiteWhere 2.0</a></li><li><a href="/docs/2.0.0/guide/microservices/instance-management.html" class="active sidebar-link">Instance Management Microservice</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/2.0.0/guide/microservices/instance-management.html#microservice-dependencies" class="sidebar-link">Microservice Dependencies</a></li><li class="sidebar-sub-header"><a href="/docs/2.0.0/guide/microservices/instance-management.html#configuration-schema" class="sidebar-link">Configuration Schema</a></li><li class="sidebar-sub-header"><a href="/docs/2.0.0/guide/microservices/instance-management.html#zookeeper-bootstrapping" class="sidebar-link">Zookeeper Bootstrapping</a></li><li class="sidebar-sub-header"><a href="/docs/2.0.0/guide/microservices/instance-management.html#instance-templates" class="sidebar-link">Instance Templates</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="instance-management-microservice"><a href="#instance-management-microservice" aria-hidden="true" class="header-anchor">#</a> Instance Management Microservice</h1> <p>The instance management microservice is used to bootstrap a SiteWhere instance and is
required to be present when starting an uninitialized SiteWhere instance. The instance
management microservice also manages updates to global instance settings such as shared
database and connector configurations.</p> <h2 id="microservice-dependencies"><a href="#microservice-dependencies" aria-hidden="true" class="header-anchor">#</a> Microservice Dependencies</h2> <ul><li><strong>User Management</strong> - Required in order to bootstrap default system users based on the
chosen instance template.</li> <li><strong>Tenant Management</strong> - Required in order to bootstrap default system tenants based on
the chosen instance template.</li></ul> <h2 id="configuration-schema"><a href="#configuration-schema" aria-hidden="true" class="header-anchor">#</a> Configuration Schema</h2> <p><a href="http://sitewhere.io/schema/sitewhere/microservice/instance-management/current/instance-management.xsd" target="_blank" rel="noopener noreferrer">Instance Management Configuration XML Schema<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="example-configuration"><a href="#example-configuration" aria-hidden="true" class="header-anchor">#</a> Example Configuration</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>im</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://sitewhere.io/schema/sitewhere/microservice/instance-management<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
  http://sitewhere.io/schema/sitewhere/microservice/instance-management
  http://sitewhere.io/schema/sitewhere/microservice/instance-management/current/instance-management.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- Allow property placeholder substitution --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token comment">&lt;!-- Instance global configuration --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>instance-management</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Reusable persistence configurations --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>persistence-configurations</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- MongoDB global configuration management --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>mongodb-configurations</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Configuration used for global services --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>mongodb-configuration</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>global<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">hostname</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.host:mongodb}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.port:27017}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">databaseName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.database:sitewhere}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">replicaSetName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.replicaset:}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- Configuration used for tenant microservices --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>mongodb-configuration</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tenant<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">hostname</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.host:mongodb}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.port:27017}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">databaseName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.tenant.prefix:tenant-[[tenant.id]]}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">replicaSetName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.replicaset:}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>mongodb-configurations</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- InfluxDB global configuration management --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>influxdb-configurations</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Default configuration for InfluxDB data access --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>influxdb-configuration</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tenant<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">hostname</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${influxdb.host:influxdb}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${influxdb.port:8086}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${influxdb.database:[[tenant.id]]}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>influxdb-configurations</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- Apache Cassandra global configuration management --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>cassandra-configurations</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>cassandra-configuration</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tenant<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">contactPoints</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${cassandra.contact.points:cassandra}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">keyspace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${cassandra.keyspace:tenant_[[tenant.id]]}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>cassandra-configurations</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>persistence-configurations</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Global connector configurations --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>connector-configurations</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>connector-configurations</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>instance-management</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="zookeeper-bootstrapping"><a href="#zookeeper-bootstrapping" aria-hidden="true" class="header-anchor">#</a> Zookeeper Bootstrapping</h2> <p>The instance management microservice is responsible for connecting to Zookeeper and
creating the base tree where all other configuration data for the instance is stored.
For more information about connectivity to Zookeeper and how the base of the configuration
tree is populated, see the <a href="/docs/2.0.0/guide/zookeeper-configuration.html">Apache Zookeper configuration guide</a>.</p> <h2 id="instance-templates"><a href="#instance-templates" aria-hidden="true" class="header-anchor">#</a> Instance Templates</h2> <p>An <em>instance template</em> is used to specify the scripts that will be executed to populate the
default users and tenants for the instance. A list of instance templates is packaged as part
of the Docker image for the instance management microservice. Each template has a JSON descriptor
that includes a unique id which may be passed if the instance is to be initialized by that
template's scripts. Below is an example of the JSON descriptor:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Default&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;initializers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;userManagement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;scripts/groovy/initializer/userModel.groovy&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tenantManagement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;scripts/groovy/initializer/tenantModel.groovy&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="adding-a-custom-instance-template"><a href="#adding-a-custom-instance-template" aria-hidden="true" class="header-anchor">#</a> Adding a Custom Instance Template</h3> <p>Additional instance templates may be added by mounting them into the filesystem of the
instance management Docker image under the templates folder.</p> <h3 id="changing-the-instance-template"><a href="#changing-the-instance-template" aria-hidden="true" class="header-anchor">#</a> Changing the Instance Template</h3> <p>The following environment variable is used to indicate which template
will be used for initialization:</p> <table><thead><tr><th>Setting</th> <th>Environment Variable</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Instance Template Id</td> <td>sitewhere.instance.template.id</td> <td>default</td></tr></tbody></table> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>The <code>default</code> template that is packaged in the Docker image loads the default <code>admin</code> and
<code>noadmin</code> users normally expected in a new system along with a default tenant based on
the <code>mongo</code> tenant template and <code>construction</code> dataset.</p></div> <h3 id="instance-data-boostrapping"><a href="#instance-data-boostrapping" aria-hidden="true" class="header-anchor">#</a> Instance Data Boostrapping</h3> <p>If no <code>bootstrapped</code> marker is found in the <code>state</code> subfolder of Zookeeper for
the instance, the instance management microservice will attempt to use the instance
template to bootstrap the user and tenant data. It waits for the user and tenant
management microservices to start before running the scripts which push data via
the respective APIs.</p> <p>Once the initialization scripts have run, the instance is considered to be initialized and
a <code>bootstrapped</code> marker is pushed to Zookeeper to prevent re-running the scripts every
time the instance starts. Removing the marker will cause the instance template data to be
loaded over the existing data, which may cause problems with duplicate key exceptions.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sitewhere/sitewhere-documentation/edit/master/docs/guide/microservices/instance-management.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/12/2018, 7:17:17 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/2.0.0/guide/sending-data.html" class="prev">
          Sending Data to SiteWhere 2.0
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/docs/2.0.0/assets/js/26.f5670e2e.js" defer></script><script src="/docs/2.0.0/assets/js/app.05b16dea.js" defer></script>
  </body>
</html>
