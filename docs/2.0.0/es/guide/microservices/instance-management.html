<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Microservicio Instance Management | SiteWhere</title>
    <meta name="description" content="SiteWhere CE 2.0.0 Documentation">
    <link rel="icon" href="/docs/2.0.0/images/favicon.png">
    
    <link rel="preload" href="/docs/2.0.0/assets/css/0.styles.523cf4aa.css" as="style"><link rel="preload" href="/docs/2.0.0/assets/js/app.45b87823.js" as="script"><link rel="preload" href="/docs/2.0.0/assets/js/14.9d3b537d.js" as="script"><link rel="prefetch" href="/docs/2.0.0/assets/js/11.87c6684c.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/2.51a7a63e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/3.13cdd439.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/4.856fab00.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/5.b1805555.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/6.868dfd49.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/7.b502a43e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/8.93dea270.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/9.ea473993.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/10.0dccd28e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/12.3e314d2a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/13.1866953a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/15.f5a13889.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/16.a45c02c1.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/17.c972f4e4.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/18.9cb548a5.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/19.884eda03.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/20.f96e446a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/21.74b705a4.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/22.1923aa0d.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/23.09fb18bc.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/24.2e84ed78.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/25.2d7a21f5.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/26.266d6ba2.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/27.0f214757.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/28.858987d4.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/29.a65b0e7c.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/30.26c432cd.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/31.a388929f.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/32.75328dff.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/33.a756d9b6.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/34.0bbef742.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/35.d5750cbd.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/36.0e36d7a3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/37.ef8e4ecf.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/38.5fc139f7.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/39.02cc9971.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/40.17392889.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/41.6334f5ad.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/42.335b65ad.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/43.a4dfab17.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/44.c257741f.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/45.8eeb57a3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/46.7fb91477.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/47.9661097a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/48.d8d1c0fe.js">
    <link rel="stylesheet" href="/docs/2.0.0/assets/css/0.styles.523cf4aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/2.0.0/es/" class="home-link router-link-active"><img src="/docs/2.0.0/images/logo.svg" alt="SiteWhere" class="logo"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/2.0.0/es/platform/" class="nav-link">Plataforma</a></div><div class="nav-item"><a href="/docs/2.0.0/es/guide/" class="nav-link router-link-active">Guía del usuario</a></div><div class="nav-item"><a href="/docs/2.0.0/es/deployment/" class="nav-link">Despliegue</a></div><div class="nav-item"><a href="/docs/2.0.0/es/development/" class="nav-link">Desarrollo</a></div><div class="nav-item"><a href="https://github.com/sitewhere/sitewhere" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Idiomas</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0/guide/microservices/instance-management.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0/es/guide/microservices/instance-management.html" class="nav-link router-link-exact-active router-link-active">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/2.0.0/es/platform/" class="nav-link">Plataforma</a></div><div class="nav-item"><a href="/docs/2.0.0/es/guide/" class="nav-link router-link-active">Guía del usuario</a></div><div class="nav-item"><a href="/docs/2.0.0/es/deployment/" class="nav-link">Despliegue</a></div><div class="nav-item"><a href="/docs/2.0.0/es/development/" class="nav-link">Desarrollo</a></div><div class="nav-item"><a href="https://github.com/sitewhere/sitewhere" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Idiomas</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0/guide/microservices/instance-management.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0/es/guide/microservices/instance-management.html" class="nav-link router-link-exact-active router-link-active">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/docs/2.0.0/es/guide/" class="sidebar-link">Guia de Usuario de SiteWhere</a></li><li><a href="/docs/2.0.0/es/guide/sending-data.html" class="sidebar-link">Enviar datos a SiteWhere 2.0</a></li><li><a href="/docs/2.0.0/es/guide/microservices/" class="sidebar-link">Guia de Microservicios</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="microservicio-instance-management"><a href="#microservicio-instance-management" aria-hidden="true" class="header-anchor">#</a> Microservicio Instance Management</h1> <p>El microservicio de gestión de instancias (<em>instance management</em>) se utiliza para iniciar
una instancia de SiteWhere y se requiere que esté presente cuando se inicia una instancia
SiteWhere no iniciada. El microservicio de gestión de instancias también gestiona las
actualizaciones de configuraciones de instancias globales, como la base de datos compartida
y las configuraciones de los conectores.</p> <h2 id="dependencias-del-microservicio"><a href="#dependencias-del-microservicio" aria-hidden="true" class="header-anchor">#</a> Dependencias del Microservicio</h2> <ul><li><p><strong>User Management</strong> - Requerido para iniciar los usuarios por defecto del sistema en
función de la plantilla de instancia elegida.</p></li> <li><p><strong>Tenant Management</strong> - Requerido para iniciar el <em>tenant</em> por defector del sistemas
basado en la plantilla de instancia elegida.</p></li></ul> <h2 id="esquema-de-configuracion"><a href="#esquema-de-configuracion" aria-hidden="true" class="header-anchor">#</a> Esquema de Configuración</h2> <p><a href="http://sitewhere.io/schema/sitewhere/microservice/instance-management/current/instance-management.xsd" target="_blank" rel="noopener noreferrer">Instance Management Configuration XML Schema<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="ejemplo-de-configuracion"><a href="#ejemplo-de-configuracion" aria-hidden="true" class="header-anchor">#</a> Ejemplo de Configuración</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>im</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://sitewhere.io/schema/sitewhere/microservice/instance-management<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
  http://sitewhere.io/schema/sitewhere/microservice/instance-management
  http://sitewhere.io/schema/sitewhere/microservice/instance-management/current/instance-management.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- Allow property placeholder substitution --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token comment">&lt;!-- Instance global configuration --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>instance-management</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Reusable persistence configurations --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>persistence-configurations</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- MongoDB global configuration management --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>mongodb-configurations</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Configuration used for global services --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>mongodb-configuration</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>global<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">hostname</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.host:mongodb}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.port:27017}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">databaseName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.database:sitewhere}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">replicaSetName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.replicaset:}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- Configuration used for tenant microservices --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>mongodb-configuration</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tenant<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">hostname</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.host:mongodb}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.port:27017}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">databaseName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.tenant.prefix:tenant-[[tenant.id]]}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">replicaSetName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${mongodb.replicaset:}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>mongodb-configurations</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- InfluxDB global configuration management --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>influxdb-configurations</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Default configuration for InfluxDB data access --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>influxdb-configuration</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tenant<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">hostname</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${influxdb.host:influxdb}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${influxdb.port:8086}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${influxdb.database:[[tenant.id]]}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>influxdb-configurations</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- Apache Cassandra global configuration management --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>cassandra-configurations</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>cassandra-configuration</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tenant<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">contactPoints</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${cassandra.contact.points:cassandra}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">keyspace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${cassandra.keyspace:tenant_[[tenant.id]]}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>cassandra-configurations</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>persistence-configurations</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Global connector configurations --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">im:</span>connector-configurations</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>connector-configurations</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">im:</span>instance-management</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="inicio-de-zookeeper"><a href="#inicio-de-zookeeper" aria-hidden="true" class="header-anchor">#</a> Inicio de Zookeeper</h2> <p>El microservicio de gestión de instancias es responsable de conectarse con Zookeeper y crear
el árbol base donde se almacenan todos los demás datos de configuración para la instancia.
Para obtener más información sobre la conectividad con Zookeeper y cómo se completa la base
del árbol de configuración, consulte la <a href="/docs/2.0.0/es/guide/zookeeper-configuration.html">Configuración de Apache Zookeper</a>.</p> <h2 id="plantillas-de-instancia"><a href="#plantillas-de-instancia" aria-hidden="true" class="header-anchor">#</a> Plantillas de Instancia</h2> <p>Una <em>plantilla de instancia</em> se usa para especificar las secuencias de comandos que se ejecutarán
para rellenar los usuarios y tenants predeterminados para la instancia. Una lista de plantillas de
instancia se empaqueta como parte de la imagen de Docker para el microservicio de gestión de instancias.
Cada plantilla tiene un descriptor JSON que incluye una identificación única que se puede pasar si
la instancia debe ser inicializada por los scripts de esa plantilla. A continuación se muestra un
ejemplo del descriptor JSON:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Default&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;initializers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;userManagement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;scripts/groovy/initializer/userModel.groovy&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tenantManagement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;scripts/groovy/initializer/tenantModel.groovy&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="agregar-plantillas-de-instancia-personalizadas"><a href="#agregar-plantillas-de-instancia-personalizadas" aria-hidden="true" class="header-anchor">#</a> Agregar Plantillas de Instancia Personalizadas</h3> <p>Se pueden agregar plantillas de instancias adicionales montándolas en el sistema de
archivos de la imagen Docker de <em>instance management</em> debajo de la carpeta de <em>templates</em>.</p> <h3 id="cambiar-la-plantilla-de-instancia"><a href="#cambiar-la-plantilla-de-instancia" aria-hidden="true" class="header-anchor">#</a> Cambiar la Plantilla de Instancia</h3> <p>La siguiente variable de entorno se usa para indicar qué plantilla se utilizará para
la inicialización:</p> <table><thead><tr><th>Configuración</th> <th>Variable de Entorno</th> <th>Valor por Defecto</th></tr></thead> <tbody><tr><td>Id Plantilla Instancia</td> <td>sitewhere.instance.template.id</td> <td>default</td></tr></tbody></table> <div class="tip custom-block"><p class="custom-block-title">AVISO</p> <p>La plantilla <code>default</code> que se empaqueta en la imagen Docker carga los usuarios predeterminados
<code>admin</code> y <code>noadmin</code> que normalmente se esperan en un nuevo sistema junto con un <em>tenant</em> por
defecto basado en el tenant <code>mongo</code> y el dataset <code>construction</code>.</p></div> <h3 id="instance-data-boostrapping"><a href="#instance-data-boostrapping" aria-hidden="true" class="header-anchor">#</a> Instance Data Boostrapping</h3> <p>Si no se encuentra un marcador <code>bootstrapped</code> en la subcarpeta <code>state</code> de Zookeeper para la instancia,
el microservicio de gestión de instancias intentará utilizar la plantilla de instancia para iniciar
los datos del usuario y del tenat. Espera a que los microservicios de gestión de usuarios
(<em>user management</em>) y de tenants (<em>tenant management</em>) comiencen antes de ejecutar los scripts que
envían datos a través de las respectivas API.</p> <p>Una vez que se han ejecutado los scripts de inicialización, se considera que la instancia se ha
inicializado y un marcador <code>bootstrapped</code> se envía al Zookeeper para evitar que se vuelvan a ejecutar
los scripts cada vez que se inicia la instancia. Al eliminar el marcador, los datos de la plantilla
de instancia se cargarán sobre los datos existentes, lo que puede causar problemas con las excepciones
de clave duplicadas.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sitewhere/sitewhere-documentation/edit/master/docs/es/guide/microservices/instance-management.md" target="_blank" rel="noopener noreferrer">Edita esta página en GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Última actualización: </span> <span class="time">2018-9-12 19:17:17</span></div></div> <!----> </div> <!----></div></div>
    <script src="/docs/2.0.0/assets/js/14.9d3b537d.js" defer></script><script src="/docs/2.0.0/assets/js/app.45b87823.js" defer></script>
  </body>
</html>
