(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{175:function(t,a,e){"use strict";e.r(a);var n=e(1),s=Object(n.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("p",[t._v("The global tenant management microservice provides the core APIs and data persistence for\nmanaging system tenants. It is initially used by the instance management microservice\nto bootstrap the system with base tenants. Afterward, it is called by the Web/REST\nmicroservice to allow the list of system tenants to be managed.")]),t._v(" "),e("p",[t._v("When a tenant is added/updated/deleted, the tenant data is pushed to a Kafka topic\nso that other interested listeners can act on the update. By default, a listener is\nregistered to boostrap newly created tenants by adding the expected tenant configuration\nhierarchy in ZooKeeper. This process includes copying the per-microservice XML configuration\nfiles from the tenant template into ZooKeeper, then executing the list of initialization\nscripts included with the template. Once this process is complete, the tenant configuration\nis marked as boostrapped so that other microservices can react to the added tenant. For\ninstance, the device management microservice will notice that a new tenant has been configured\nand will wait for the bootstrapped indicator, then will load the device-management.xml\nconfiguration file to initialize a new device management tenant engine for the added tenant.\nAny time that files within a tenant are changed, the changes are broadcast to tenant engines\nrunning on all other microservices so they can react to the changes. In the previous example,\nif multiple device management microservices are running (scale > 1), each microservice will\ndetect the updates and reload the tenant engines to reflect the updates.")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("p",[e("a",{attrs:{href:"http://sitewhere.io/schema/sitewhere/microservice/tenant-management/current/tenant-management.xsd",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tenant Management Configuration XML Schema"),e("OutboundLink")],1)]),t._v(" "),t._m(4),t._v(" "),t._m(5)])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"tenant-management-microservice"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tenant-management-microservice","aria-hidden":"true"}},[this._v("#")]),this._v(" Tenant Management Microservice")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"microservice-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#microservice-dependencies","aria-hidden":"true"}},[this._v("#")]),this._v(" Microservice Dependencies")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[a("strong",[this._v("Instance Management")]),this._v(" - Required to initially bootstrap Zookeeper data.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"configuration-schema"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration-schema","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration Schema")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"example-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Example Configuration")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n"),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("beans")]),t._v(" "),e("span",{attrs:{class:"token attr-name"}},[t._v("xmlns")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.springframework.org/schema/beans"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t"),e("span",{attrs:{class:"token attr-name"}},[e("span",{attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("ds")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://sitewhere.io/schema/sitewhere/microservice/common/datastore"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t"),e("span",{attrs:{class:"token attr-name"}},[e("span",{attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{attrs:{class:"token attr-name"}},[e("span",{attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("context")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.springframework.org/schema/context"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t"),e("span",{attrs:{class:"token attr-name"}},[e("span",{attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("tm")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://sitewhere.io/schema/sitewhere/microservice/tenant-management"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t"),e("span",{attrs:{class:"token attr-name"}},[e("span",{attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("\n           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd\n           http://sitewhere.io/schema/sitewhere/microservice/common/datastore http://sitewhere.io/schema/sitewhere/microservice/common/current/datastore-common.xsd\n           http://sitewhere.io/schema/sitewhere/microservice/tenant-management http://sitewhere.io/schema/sitewhere/microservice/tenant-management/current/tenant-management.xsd"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t"),e("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- Tenant Management Configuration --\x3e")]),t._v("\n\t"),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{attrs:{class:"token namespace"}},[t._v("tm:")]),t._v("tenant-management")]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t\t"),e("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- Use global MongoDB configuration --\x3e")]),t._v("\n\t\t"),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{attrs:{class:"token namespace"}},[t._v("ds:")]),t._v("device-management-datastore")]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t"),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{attrs:{class:"token namespace"}},[t._v("ds:")]),t._v("mongodb-datastore-reference")]),t._v(" "),e("span",{attrs:{class:"token attr-name"}},[t._v("id")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("global"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t"),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("</")]),e("span",{attrs:{class:"token namespace"}},[t._v("ds:")]),t._v("device-management-datastore")]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t"),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("</")]),e("span",{attrs:{class:"token namespace"}},[t._v("tm:")]),t._v("tenant-management")]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("beans")]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])}],!1,null,null,null);s.options.__file="tenant-management.md";a.default=s.exports}}]);