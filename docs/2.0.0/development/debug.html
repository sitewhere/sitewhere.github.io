<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Debugging SiteWhere | SiteWhere</title>
    <meta name="description" content="SiteWhere CE 2.0.0 Documentation">
    <link rel="icon" href="/docs/2.0.0/images/favicon.ico">
    
    <link rel="preload" href="/docs/2.0.0/assets/css/0.styles.bf0c8a6a.css" as="style"><link rel="preload" href="/docs/2.0.0/assets/js/app.3dc0e8a8.js" as="script"><link rel="preload" href="/docs/2.0.0/assets/js/10.49d99b3c.js" as="script"><link rel="preload" href="/docs/2.0.0/assets/js/4.ca68af08.js" as="script"><link rel="prefetch" href="/docs/2.0.0/assets/js/25.0cfa7538.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/2.b7022358.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/3.9c3ab5ce.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/5.fffcbad8.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/6.5bd1b39b.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/7.13275b44.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/8.ec511d26.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/9.dee0c06e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/11.49c3b4c9.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/12.a8da03dd.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/13.263f677c.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/14.40c69401.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/15.da3ca230.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/16.8802e1b4.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/17.67b8d10a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/18.7f3a1d74.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/19.511e99ff.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/20.07312a3b.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/21.b47153ac.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/22.1a186144.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/23.cd78b1b8.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/24.e09e2070.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/26.7ed61828.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/27.41d63c1d.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/28.f0eb677e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/29.edc896d3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/30.357f4655.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/31.58c899fc.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/32.59caadd0.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/33.f4ae52f4.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/34.37e00291.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/35.8ca3cc4e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/36.eaf3bfca.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/37.c167672a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/38.7134806f.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/39.92265b15.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/40.afd8bd8c.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/41.dd7641e0.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/42.87a0aea3.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/43.773a69dd.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/44.808d8349.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/45.6050b5ee.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/46.7215f89a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/47.71205ad6.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/48.09d79ca1.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/49.78ec7510.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/50.6229c0cd.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/51.cb0900b6.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/52.08ed9617.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/53.5c2d4dc1.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/54.a7597c56.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/55.a586339a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/56.5db8cdac.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/57.4a3d674e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/58.ee63a962.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/59.e45e73ee.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/60.6796720b.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/61.44bcd5a7.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/62.0b22380e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/63.697da4bf.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/64.1f419f98.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/65.b31aaf8e.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/66.c1f2fe88.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/67.e2d2621c.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/68.d9134b28.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/69.90cdb077.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/70.251161f6.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/71.d03356b6.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/72.14f6d485.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/73.d452426a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/74.de4f566a.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/75.90c279cc.js"><link rel="prefetch" href="/docs/2.0.0/assets/js/76.9a650fce.js">
    <link rel="stylesheet" href="/docs/2.0.0/assets/css/0.styles.bf0c8a6a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/2.0.0/" class="home-link router-link-active"><img src="/docs/2.0.0/images/logo.svg" alt="SiteWhere" class="logo"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/2.0.0/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.0.0/guide/" class="nav-link">User Guides</a></div><div class="nav-item"><a href="/docs/2.0.0/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><a href="/docs/2.0.0/development/" class="nav-link router-link-active">Development</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0/development/debug.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0/es/" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/2.0.0/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.0.0/guide/" class="nav-link">User Guides</a></div><div class="nav-item"><a href="/docs/2.0.0/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><a href="/docs/2.0.0/development/" class="nav-link router-link-active">Development</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.0.0/development/debug.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.0.0/es/" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/docs/2.0.0/development/" class="sidebar-link">SiteWhere Development Guide</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="debugging-sitewhere"><a href="#debugging-sitewhere" aria-hidden="true" class="header-anchor">#</a> Debugging SiteWhere</h1> <p>In order to debug SiteWhere debug images need to be deploy on the Kubernetes clusters.
SiteWhere debug microservices images uses <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/jpda/jdwp-spec.html" target="_blank" rel="noopener noreferrer">Java Debug Wire Protocol<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for
communication between a debugger and the Java virtual machine (VM) that runs
the microservice. To this end, each microservice exposes JDWP on port 8001 and
the Helm Chart translate that port as a <code>NodePort</code> in the Kubernetes Cluster
according to the table below.</p> <table><thead><tr><th>Microservice</th> <th>JDWP Port</th> <th>JMX Port</th></tr></thead> <tbody><tr><td>Instance Managemwnt</td> <td>8001</td> <td>1101</td></tr> <tr><td>User Management</td> <td>8002</td> <td>1102</td></tr> <tr><td>Tenant Management</td> <td>8003</td> <td>1103</td></tr> <tr><td>Device Management</td> <td>8004</td> <td>1104</td></tr> <tr><td>Event Management</td> <td>8005</td> <td>1105</td></tr> <tr><td>Asset Management</td> <td>8006</td> <td>1106</td></tr> <tr><td>Event Sources</td> <td>8007</td> <td>1107</td></tr> <tr><td>Inbound Processing</td> <td>8008</td> <td>1108</td></tr> <tr><td>Label Generation</td> <td>8009</td> <td>1109</td></tr> <tr><td>Web Rest</td> <td>8010</td> <td>1110</td></tr> <tr><td>Batch Operations</td> <td>8011</td> <td>1111</td></tr> <tr><td>Command Delivery</td> <td>8012</td> <td>1112</td></tr> <tr><td>Device Registration</td> <td>8013</td> <td>1113</td></tr> <tr><td>Device State</td> <td>8014</td> <td>1114</td></tr> <tr><td>Event Search</td> <td>8015</td> <td>1115</td></tr> <tr><td>Outbound Connectors</td> <td>8016</td> <td>1116</td></tr> <tr><td>Rule Processing</td> <td>8017</td> <td>1117</td></tr> <tr><td>Schedule Management</td> <td>8018</td> <td>1118</td></tr> <tr><td>Streaming Media</td> <td>8019</td> <td>1119</td></tr></tbody></table> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Please refer to <a href="/docs/2.0.0/development/#creating-debug-images">Creating Debug Images</a> section on
how to build SiteWhere debug images.</p></div> <h2 id="using-helm-to-install-debug-images"><a href="#using-helm-to-install-debug-images" aria-hidden="true" class="header-anchor">#</a> Using Helm to Install Debug Images</h2> <p>SiteWhere Helm Chart provides the tooling necessary to install <em>debug</em> images on Kubernetes.
To install SiteWhere debug image set <code>services.debug</code> to <code>true</code>. For example, to install
SiteWhere <em>default</em> profile debug images use the following command:</p> <div class="language-sh extra-class"><pre class="language-text"><code>helm install --name sitewhere --set services.debug=true ./sitewhere
</code></pre></div><h2 id="connecting-the-debugger-to-sitewhere"><a href="#connecting-the-debugger-to-sitewhere" aria-hidden="true" class="header-anchor">#</a> Connecting the debugger to SiteWhere</h2> <p>First, you need to have a workspace with source code version of the debug image you are running.
You can you Eclipse and import the sources code. It should look like the image below.</p> <a href="/docs/2.0.0/images/development/debug-workspace.png" class="inline-image"><img src="/docs/2.0.0/images/development/debug-workspace.png" alt title="SiteWhere Workspace"></a> <p>After that you need to forward the JDWP port of the microservice you want to connect the debugger to.
For example, if you want to connect the debugger to Device Management use the following command:</p> <div class="language-sh extra-class"><pre class="language-text"><code>kubectl port-forward deployment/sitewhere-device-management 8004:8001
</code></pre></div><p>Once you have JPWD port forwarded you need to create a Remove Java Application Debug
Configuration. Go to <code>Run → Debug Configuration</code>. Select <code>Remote Java Application</code> and click
on <code>New lunch configuration</code>.</p> <a href="/docs/2.0.0/images/development/debug-create-remote-java-application.png" class="inline-image"><img src="/docs/2.0.0/images/development/debug-create-remote-java-application.png" alt title="Create Remove Java Application Debugger"></a> <p>Then select the <em>project</em> you want to debug the <em>hostname</em> and <em>port</em>. In the example below, the project selected is
Device Management, the hostname is <em>localhost</em> since we are locally forwarding the port and <em>8004</em> is the port
we are forwarding.</p> <a href="/docs/2.0.0/images/development/debug-sample-remote-java-application.png" class="inline-image"><img src="/docs/2.0.0/images/development/debug-sample-remote-java-application.png" alt title="Sample Remove Java Application Debugger"></a> <p>Once you enter this configuration, click on <code>Debug</code> to start the debugger. You should be able to connect to the remote
host, add break points and see the threads running like in the image below.</p> <a href="/docs/2.0.0/images/development/debug-connect-debugger.png" class="inline-image"><img src="/docs/2.0.0/images/development/debug-connect-debugger.png" alt title="Debug Remove Java Application"></a> <p>If you get an error like the image below, please check that you running the debug images, that you
have forwarded the port of the microservice you want to debug and that you have enter the hostname and port
correctly.</p> <a href="/docs/2.0.0/images/development/debug-fail-to-connect.png" class="inline-image"><img src="/docs/2.0.0/images/development/debug-fail-to-connect.png" alt title="Debug Fail to Connect"></a></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sitewhere/sitewhere-documentation/edit/sitewhere-2.0.0/docs/development/debug.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/7/2018, 9:53:13 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/docs/2.0.0/assets/js/10.49d99b3c.js" defer></script><script src="/docs/2.0.0/assets/js/4.ca68af08.js" defer></script><script src="/docs/2.0.0/assets/js/app.3dc0e8a8.js" defer></script>
  </body>
</html>
