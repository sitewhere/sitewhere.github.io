<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installing a SiteWhere Instance | SiteWhere CE 2.1.1 Documentation</title>
    <meta name="description" content="SiteWhere CE 2.1.1 Documentation">
    <link rel="icon" href="/docs/2.1.1/images/favicon.ico">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel='canonical' href='https://sitewhere.io/docs/2.1.1/deployment/'>
    
    <link rel="preload" href="/docs/2.1.1/assets/css/0.styles.14c18768.css" as="style"><link rel="preload" href="/docs/2.1.1/assets/js/app.51b9d434.js" as="script"><link rel="preload" href="/docs/2.1.1/assets/js/10.8b0bf471.js" as="script"><link rel="preload" href="/docs/2.1.1/assets/js/8.097090a1.js" as="script"><link rel="preload" href="/docs/2.1.1/assets/js/3.a492a356.js" as="script"><link rel="prefetch" href="/docs/2.1.1/assets/js/100.285e5b6b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/101.e57c3685.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/102.dd4f94a1.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/103.8850daf9.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/104.29dd3b78.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/105.501f544b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/106.85656234.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/107.b8a5f5cb.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/108.dcfcbdf0.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/109.2baf02b6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/11.ade4771f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/110.58bbedea.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/111.cabb4195.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/112.d5efed28.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/113.e0e80c95.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/114.865ccec4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/115.c2046e39.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/116.1cb541ba.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/117.f1b3b710.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/118.e353d613.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/119.ae335fd8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/12.7432bc14.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/120.37fcfd48.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/121.907ec686.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/122.552406eb.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/123.b81ec1df.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/124.a89f5437.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/125.d5cbc162.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/126.e90d1fe2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/127.9b54a088.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/128.a0b30e6b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/129.278e4b9d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/13.62f96089.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/130.1f0cc733.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/131.6e51a64f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/132.8decb639.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/133.f14f0d7b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/134.5de4d351.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/135.063cab82.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/136.c7f0e8fa.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/137.91967655.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/138.5d4258e5.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/139.f904389b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/14.5b4cc09a.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/140.f0dd6bca.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/141.fe14eff6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/142.deaaab51.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/143.66144ea1.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/144.37c87c24.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/145.2afd4ec2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/146.24415c70.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/147.57b15b92.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/148.601a04f7.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/149.f6f80ea8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/15.804e0916.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/150.4bb17f71.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/151.31b8c1f1.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/152.332d0689.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/153.509c34b6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/16.447b43e8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/17.fc4f4b04.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/18.d5ef8374.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/19.90acf8aa.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/2.df64bad9.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/20.568b41e2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/21.7705adcd.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/22.4553d585.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/23.79efc3e3.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/24.a619b8d2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/25.12bf7485.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/26.d86502a6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/27.0e8363a4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/28.5d825e19.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/29.b6e4d969.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/30.f6ef58a9.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/31.b7a86413.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/32.33fb191d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/33.827846d6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/34.94edeefe.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/35.64edbb06.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/36.e0020ab9.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/37.ec00b8d3.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/38.91efa070.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/39.e5fd4f1f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/4.0e3b3d67.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/40.1253dd2f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/41.2fe40d37.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/42.c1e9a263.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/43.8ffa3b6b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/44.de7677a7.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/45.67c8a94a.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/46.4b89f323.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/47.8420a082.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/48.f45cf2c1.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/49.7a3c5ff5.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/5.fd856d4d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/50.bf25f929.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/51.8601b4db.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/52.045f8e7c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/53.b12fd3f8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/54.4458dd50.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/55.a0f51647.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/56.72e56514.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/57.85c8a94e.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/58.2a9977a6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/59.b2ff8c9c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/6.86d6feb3.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/60.58d41f00.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/61.135f222a.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/62.9ee923e8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/63.55844d12.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/64.caf7004e.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/65.ce80fb82.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/66.5fde1f55.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/67.2850bd51.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/68.f92316f1.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/69.3d30bec2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/7.59b54ecb.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/70.b69659dd.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/71.863396f7.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/72.ba567ef0.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/73.09096052.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/74.595e867d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/75.0f8654ed.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/76.94f045cd.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/77.aec39dc3.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/78.7669f871.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/79.a3dde2e0.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/80.1009160c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/81.c94a1eb2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/82.bf2c0310.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/83.f0869ef4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/84.9308c793.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/85.afa8ff16.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/86.c7852197.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/87.f3e341b0.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/88.0bcb07c7.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/89.15093543.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/9.1b0727d4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/90.afddd8c4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/91.f7ac7eea.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/92.25af447f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/93.b5a14bd4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/94.97077f34.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/95.b9c0369d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/96.63021f2c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/97.b6983289.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/98.d454c37c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/99.17bc55b5.js">
    <link rel="stylesheet" href="/docs/2.1.1/assets/css/0.styles.14c18768.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/2.1.1/" class="home-link router-link-active"><img src="/docs/2.1.1/images/logo.svg" alt="SiteWhere CE 2.1.1 Documentation" class="logo"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/2.1.1/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.1.1/deployment/" class="nav-link router-link-exact-active router-link-active">Installation</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">User Guides</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/architecture/" class="nav-link">Architecture Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/deployment/" class="nav-link">Deployment Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/administration/" class="nav-link">System Administration Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/devices/" class="nav-link">Device Interaction Guides</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/microservices/" class="nav-link">Microservice Guides</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/api/" class="nav-link">API Guides</a></li></ul></div></div><div class="nav-item"><a href="/docs/2.1.1/development/" class="nav-link">Development</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.1.1/deployment/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/es/deployment/" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/2.1.1/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.1.1/deployment/" class="nav-link router-link-exact-active router-link-active">Installation</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">User Guides</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/architecture/" class="nav-link">Architecture Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/deployment/" class="nav-link">Deployment Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/administration/" class="nav-link">System Administration Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/devices/" class="nav-link">Device Interaction Guides</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/microservices/" class="nav-link">Microservice Guides</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/api/" class="nav-link">API Guides</a></li></ul></div></div><div class="nav-item"><a href="/docs/2.1.1/development/" class="nav-link">Development</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.1.1/deployment/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/es/deployment/" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/docs/2.1.1/deployment/" class="active sidebar-link">Installing a SiteWhere Instance</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#system-requirements" class="sidebar-link">System Requirements</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#install-kubernetes" class="sidebar-link">Install Kubernetes</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#install-helm" class="sidebar-link">Install Helm</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#install-istio" class="sidebar-link">Install Istio</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#install-sitewhere-from-sitewhere-helm-repository" class="sidebar-link">Install SiteWhere from SiteWhere Helm Repository</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#install-sitewhere-from-sitewhere-kubernetes-repository" class="sidebar-link">Install SiteWhere from SiteWhere Kubernetes Repository</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#install-rook" class="sidebar-link">Install Rook</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#monitor-sitewhere-services" class="sidebar-link">Monitor SiteWhere Services</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#run-the-administrative-application" class="sidebar-link">Run the Administrative Application</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#remove-sitewhere" class="sidebar-link">Remove SiteWhere</a></li><li class="sidebar-sub-header"><a href="/docs/2.1.1/deployment/#uninstall-rook" class="sidebar-link">Uninstall Rook</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="installing-a-sitewhere-instance"><a href="#installing-a-sitewhere-instance" aria-hidden="true" class="header-anchor">#</a> Installing a SiteWhere Instance</h1> <span></span> <p>This guide covers the SiteWhere 2.1 deployment process which has changed
significantly from the one used for SiteWhere 1.x. While previous versions
of SiteWhere were deployed as a single server node, the SiteWhere 2.1
architecture is based on many microservices which are deployed into a
<a href="https://https://kubernetes.io" target="_blank" rel="noopener noreferrer">Kubernetes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> infrastructure.</p> <a href="/docs/2.1.1/images/deployment/deployment.png" class="inline-image"><img src="/docs/2.1.1/images/deployment/deployment.png" alt title="SiteWhere Deployment Diagram"></a> <h2 id="system-requirements"><a href="#system-requirements" aria-hidden="true" class="header-anchor">#</a> System Requirements</h2> <p>Because SiteWhere 2.1 uses a microservices architecture, the number of
processes running concurrently has increased, which in turn requires
more memory and processing power. The minimum hardware specifications
for a single node Kubernetes cluster running a SiteWhere instance is:</p> <table><thead><tr><th>Resource</th> <th>Min Value</th></tr></thead> <tbody><tr><td>Memory</td> <td>16GB RAM</td></tr> <tr><td>CPU</td> <td>4 CPUs</td></tr> <tr><td>Hard Disk/SSD</td> <td>100GB</td></tr></tbody></table> <p>In most real-world deployment scenarios, a multi-node Kubernetes cluster
will be used so that the system can be made highly available. In cases
where microservices are distributed across multiple k8s nodes,
the per-node requirements can be adjusted based on the number of
microservices per node (generally 500MB of memory per microservice).</p> <h2 id="install-kubernetes"><a href="#install-kubernetes" aria-hidden="true" class="header-anchor">#</a> Install Kubernetes</h2> <p>SiteWhere 2.1 uses Kubernetes as a production-grade container orchestration solution
which may be installed both locally/on-premise and in all major cloud environments.
Kubernetes clusters are available as a service on
<a href="https://cloud.google.com/kubernetes-engine/" target="_blank" rel="noopener noreferrer">Google Cloud<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,
<a href="https://aws.amazon.com/eks/" target="_blank" rel="noopener noreferrer">Amazon AWS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,
<a href="https://azure.microsoft.com/en-us/services/kubernetes-service/" target="_blank" rel="noopener noreferrer">Azure<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and
most of the other cloud providers.</p> <h3 id="installing-a-single-node-development-environment"><a href="#installing-a-single-node-development-environment" aria-hidden="true" class="header-anchor">#</a> Installing a Single-Node Development Environment</h3> <p>A single-node Kubernetes cluster may be deployed for SiteWhere development
and testing. Depending on the underlying operating system used, there are
a few options for running a local k8s instance.</p> <h4 id="using-docker-kubernetes-integration"><a href="#using-docker-kubernetes-integration" aria-hidden="true" class="header-anchor">#</a> Using Docker/Kubernetes Integration</h4> <p><a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provides the default container implementation
used by most Kubernetes providers. The Docker ecosystem has embraced Kubernetes
and offers out-of-the-box support for running a single-node instance via
their <a href="https://docs.docker.com/v17.09/docker-for-windows/install/" target="_blank" rel="noopener noreferrer">Docker for Windows<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
and <a href="https://docs.docker.com/v17.09/docker-for-mac/install/" target="_blank" rel="noopener noreferrer">Docker for Mac<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
offerings. After installing the core Docker components, Kubernetes support
may be enabled directly from within the Docker settings. For most users, this
is the fastest path to getting a local Kubernetes environment running. For more
details see <a href="https://blog.docker.com/2018/07/kubernetes-is-now-available-in-docker-desktop-stable-channel/" target="_blank" rel="noopener noreferrer">this blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
from the Docker team.</p> <h4 id="using-minikube"><a href="#using-minikube" aria-hidden="true" class="header-anchor">#</a> Using Minikube</h4> <p><a href="https://github.com/kubernetes/minikube" target="_blank" rel="noopener noreferrer">Minikube<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a tool that makes it easy
to run a single-node Kubernetes cluster inside a virtual machine. Environments supported
include <a href="https://www.virtualbox.org/" target="_blank" rel="noopener noreferrer">VirtualBox<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,
<a href="https://www.vmware.com/products/fusion.html" target="_blank" rel="noopener noreferrer">VMware Fusion<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
and many others. For complete instructions on installing/deploying Minikube
see their <a href="https://kubernetes.io/docs/setup/minikube/" target="_blank" rel="noopener noreferrer">setup guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>If a Kubernetes cluster is installed on bare metal or on virtual machines, it’s missing an external
load balancer. It’s a cloud network load balancer that comes with platforms such as Azure or GCM,
that provides an externally-accessible IP address that sends traffic to the correct port on your cluster nodes.
<a href="https://metallb.universe.tf/" target="_blank" rel="noopener noreferrer">MetalLB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a load balancer designed to run on and to work with Kubernetes
and it will allow you to use the type LoadBalancer when you declare a service.</p> <h4 id="install-metallb-on-minikube"><a href="#install-metallb-on-minikube" aria-hidden="true" class="header-anchor">#</a> Install MetalLB on Minikube</h4> <p>MetalLB runs in two parts: a cluster-wide controller, and a per-machine protocol speaker. Install MetalLB by
applying the manifest:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ kubectl apply -f https://raw.githubusercontent.com/google/metallb/v0.7.3/manifests/metallb.yaml
</code></pre></div><p>This manifest creates a bunch of resources. Most of them are related to access control, so that MetalLB can
read and write the Kubernetes objects it needs to do its job.</p> <p>The two pieces of interest are the <strong>“controller”</strong> deployment, and the <strong>“speaker”</strong> DaemonSet. By monitoring:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ kubectl get pods -n metallb-system
</code></pre></div><p>similar output should appear:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>NAME                          READY     STATUS    RESTARTS   AGE
controller-7fbd769fcc-58fm8   1/1       Running   0          50m
speaker-rctgd                 1/1       Running   0          50m
</code></pre></div><p>For complete instructions on installing MetalLB see their <a href="https://metallb.universe.tf/installation/" target="_blank" rel="noopener noreferrer">MetalLB installation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>Apply ConfigMap</strong></p> <p>MetalLB’s configuration is a standard Kubernetes ConfigMap, config under the metallb-system namespace. It contains two pieces
of information: what IP addresses it’s allowed to hand out and which protocol to use for such task.
In this configuration MetalLB is instructed to hand out address from the 192.168.99.100/28 range, using layer 2 mode (protocol: layer2).<br>
In local development, Minikube IP address is used as the start of the range.
To get Minikube IP address use:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ minikube ip
</code></pre></div><p>Result example:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>192.168.99.100
</code></pre></div><p>Apply this configuration:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>apiVersion: v1
kind: ConfigMap
metadata:
  namespace: metallb-system
  name: config
data:
  config: <span class="token operator">|</span>
    address-pools:
    - name: custom-ip-space
      protocol: layer2
      addresses:
      - 192.168.99.100/28
</code></pre></div><p>For complete instructions on configuration MetalLB see their <a href="https://metallb.universe.tf/configuration/" target="_blank" rel="noopener noreferrer">MetalLB configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h4 id="more-options"><a href="#more-options" aria-hidden="true" class="header-anchor">#</a> More Options</h4> <p>For a complete list of other options for deploying Kubernetes, see the
<a href="https://kubernetes.io/docs/setup/" target="_blank" rel="noopener noreferrer">Kubernetes Setup Guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="install-helm"><a href="#install-helm" aria-hidden="true" class="header-anchor">#</a> Install Helm</h2> <p>The preferred method of deploying a SiteWhere 2.1 instance to a running Kubernetes
Cluster is by using <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, which supports a streamlined,
configurable deployment process. SiteWhere provides Helm
<a href="https://github.com/sitewhere/sitewhere-k8s/tree/master/charts" target="_blank" rel="noopener noreferrer">charts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> which
can be used to bootstrap the system in various configurations depending
on the profiles and other configuration options selected.</p> <p>In order to deploy SiteWhere, Helm needs to be installed. Follow
<a href="https://docs.helm.sh/using_helm/#installing-helm" target="_blank" rel="noopener noreferrer">these<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> instructions to install
Helm in your environment.</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>SiteWhere does not currently support Helm 3 since it has not been officially released
and there are significant changes to the architecture and CLI commands. All instructions
related to Helm assume that a 2.x version is being used.</p></div> <h2 id="install-istio"><a href="#install-istio" aria-hidden="true" class="header-anchor">#</a> Install Istio</h2> <p>SiteWhere 2.1 requeries <a href="https://istio.io/" target="_blank" rel="noopener noreferrer">Istio<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, with
<a href="https://istio.io/docs/setup/kubernetes/additional-setup/sidecar-injection/#automatic-sidecar-injection" target="_blank" rel="noopener noreferrer">Automatic sidecar injection<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,
installed on a Kubernetes cluster before you deploy an instance of SiteWhere. You can install Istio
<a href="https://istio.io/docs/setup/kubernetes/install/helm/" target="_blank" rel="noopener noreferrer">with<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or <a href="https://istio.io/docs/setup/kubernetes/install/kubernetes/" target="_blank" rel="noopener noreferrer">without<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Helm.</p> <p>Make sure that the namespace where you are deploying SiteWhere has the label <code>istio-injection=enabled</code>,
for example for the <code>default</code> namespace use:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl get namespace -L istio-injection
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>NAME           STATUS    AGE       ISTIO-INJECTION
default        Active    1h        enabled
istio-system   Active    1h
kube-public    Active    1h
kube-system    Active    1h
</code></pre></div><p>If not, add the label to the namespace:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl label namespace default istio-injection<span class="token operator">=</span>enabled
</code></pre></div><h2 id="install-sitewhere-from-sitewhere-helm-repository"><a href="#install-sitewhere-from-sitewhere-helm-repository" aria-hidden="true" class="header-anchor">#</a> Install SiteWhere from SiteWhere Helm Repository</h2> <p>To intall SiteWhere using Helm, you need to add the <a href="https://sitewhere.io/helm-charts" target="_blank" rel="noopener noreferrer">SiteWhere Helm Repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
to your helm client.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helm repo add sitewhere https://sitewhere.io/helm-charts
</code></pre></div><p>Then you need to update your local helm repository</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helm repo update
</code></pre></div><p>To install the chart with the release name <code>sitewhere</code> execute:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helm <span class="token function">install</span> --name sitewhere sitewhere/sitewhere
</code></pre></div><h2 id="install-sitewhere-from-sitewhere-kubernetes-repository"><a href="#install-sitewhere-from-sitewhere-kubernetes-repository" aria-hidden="true" class="header-anchor">#</a> Install SiteWhere from SiteWhere Kubernetes Repository</h2> <p>In order to make the process of installing the various SiteWhere infrastructure
components easier, a separate <a href="https://github.com/sitewhere/sitewhere-k8s" target="_blank" rel="noopener noreferrer">repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
is made available for the various k8s artifacts.</p> <h3 id="clone-the-repository"><a href="#clone-the-repository" aria-hidden="true" class="header-anchor">#</a> Clone the Repository</h3> <p>Using a <a href="https://git-scm.com/" target="_blank" rel="noopener noreferrer">Git<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> client, clone the repository to the machine
where you have the Kubernetes environment configured. The repository can be cloned
with the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/sitewhere/sitewhere-k8s.git
</code></pre></div><p>Once the repository has been cloned, navigate into the <strong>sitewhere-k8s/charts</strong>
subdirectory. This directory contains Helm Charts and Kubernetes resources for SiteWhere
deployment scenarios.</p> <h3 id="install-sitewhere"><a href="#install-sitewhere" aria-hidden="true" class="header-anchor">#</a> Install SiteWhere</h3> <p>To install SiteWhere with the default configuration (including all microservices and
the default infrastructure components) run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helm <span class="token function">install</span> --name sitewhere ./sitewhere
</code></pre></div><h3 id="running-with-constrained-resources"><a href="#running-with-constrained-resources" aria-hidden="true" class="header-anchor">#</a> Running with Constrained Resources</h3> <p>If you wish to run SiteWhere in a low resource cluster, use the <em>minimal</em> profile
with the Helm Chart to only install the core microservices required to bootstrap
the system:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helm <span class="token function">install</span> --name sitewhere --set services.profile<span class="token operator">=</span>minimal ./sitewhere
</code></pre></div><p>In this configuration, some services will not be available and the corresponding
APIs will return error codes indicating that requests for the service can not
be satisfied.</p> <h3 id="running-with-host-storage"><a href="#running-with-host-storage" aria-hidden="true" class="header-anchor">#</a> Running with Host Storage</h3> <p>If you don't need Rook.io, you can skip the Rook.io install and install
SiteWhere Helm Chart setting the <code>persistence.storageClass</code> property to
other than <code>rook-ceph-block</code>, for example to use <code>hostpath</code> Persistence
Storage Class, use the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helm <span class="token function">install</span> --name sitewhere --set persistence.storageClass<span class="token operator">=</span>hostpath ./sitewhere
</code></pre></div><h2 id="install-rook"><a href="#install-rook" aria-hidden="true" class="header-anchor">#</a> Install Rook</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>This step is optional, but it is recommended for production grade installations.</p></div> <p>In order to support multi-node persistent storage for SiteWhere infrastucture components
such as Kafka, Zookeeper, and the various database technologies, a distributed
storage system such as <a href="https://ceph.com/" target="_blank" rel="noopener noreferrer">Ceph<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> should be used. The
<a href="https://rook.io" target="_blank" rel="noopener noreferrer">Rook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> project supports a streamlined process for deploying
Ceph in a Kubernetes environment, allowing for scalable, reliable persistent
storage that may be used directly from standard k8s storage APIs.</p> <p>By executing the following list of commands, a Rook cluster will be bootstrapped
and made available for use by SiteWhere.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl create -f rook/common.yaml
kubectl create -f rook/operator.yaml
kubectl create -f rook/cluster.yaml
</code></pre></div><p>Note that the Rook components allow persistent information such as databases
or other system state to be kept outside of the SiteWhere instance. SiteWhere
uses k8s <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noopener noreferrer">persistent volumes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
to create references to the persistent data which is made available across the k8s
cluster in a replicated, highly-available fashion and lives beyond system restarts.
The underlying data is only deleted if the PVCs/PVs are manually deleted.</p> <h2 id="monitor-sitewhere-services"><a href="#monitor-sitewhere-services" aria-hidden="true" class="header-anchor">#</a> Monitor SiteWhere Services</h2> <p>Once SiteWhere has been installed, there are many ways of interacting with the system
to verify that the microservices have started successfully. Any of the standard
Kubernetes tooling may be used to introspect the SiteWhere pods.</p> <h3 id="using-visual-studio-code-kubernetes-support"><a href="#using-visual-studio-code-kubernetes-support" aria-hidden="true" class="header-anchor">#</a> Using Visual Studio Code Kubernetes Support</h3> <p><a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">Visual Studio Code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> offers an optional Kubernetes
plugin which supports management of many aspects of a running cluster. The extension
is published as an <a href="https://github.com/Azure/vscode-kubernetes-tools" target="_blank" rel="noopener noreferrer">open source<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
repository and may be installed via the VS Code extension manager.</p> <a href="/docs/2.1.1/images/deployment/vs-code-kubernetes-plugin.png" class="inline-image"><img src="/docs/2.1.1/images/deployment/vs-code-kubernetes-plugin.png" alt title="Kubernetes Plugin"></a> <p>After installing the plugin, browse into the Kubernetes nodes to see the running services.
Once all of the infrastructure services have started, the SiteWhere services will start.
To browse the logs for the individual services, right-click on a pod in the tree and choose
<code>Follow Logs</code> to attach to the logs for that microservice in a terminal. Multiple terminals
may be opened concurrently to track logs for multiple services.</p> <a href="/docs/2.1.1/images/deployment/vs-code-sitewhere-services.png" class="inline-image"><img src="/docs/2.1.1/images/deployment/vs-code-sitewhere-services.png" alt title="SiteWhere Services"></a> <h3 id="using-kubernetes-dashboard-ui"><a href="#using-kubernetes-dashboard-ui" aria-hidden="true" class="header-anchor">#</a> Using Kubernetes Dashboard UI</h3> <p>The Kubernetes project includes a dashboard user interface that may be used to view the
cluster components for tasks such as monitoring component status and viewing logs. For complete
instructions on installing the Kubernetes Dashboard UI, refer to the dashboard deployment
<a href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/#deploying-the-dashboard-ui" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="run-the-administrative-application"><a href="#run-the-administrative-application" aria-hidden="true" class="header-anchor">#</a> Run the Administrative Application</h2> <p>Once a SiteWhere instance has been deployed, the SiteWhere administrative application may be
used to connect to the instance and configure it. The administrative application is based on
<a href="https://electronjs.org/" target="_blank" rel="noopener noreferrer">Electron<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and may be downloaded from directly from the project
<a href="https://github.com/sitewhere/sitewhere-admin-ui/releases" target="_blank" rel="noopener noreferrer">releases<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> page. After installing
the application, open it and log in using the default administrative credentials:</p> <p><strong>username</strong>: <code>admin</code></p> <p><strong>password</strong>: <code>password</code></p> <a href="/docs/2.1.1/images/platform/login.png" class="inline-image"><img src="/docs/2.1.1/images/platform/login.png" alt title="Administrative Application"></a> <p>See the user guide for more information about using the administrative application.</p> <h2 id="remove-sitewhere"><a href="#remove-sitewhere" aria-hidden="true" class="header-anchor">#</a> Remove SiteWhere</h2> <p>To remove SiteWhere, execute the following command</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helm del --purge sitewhere
</code></pre></div><h3 id="remove-sitewhere-persistent-data"><a href="#remove-sitewhere-persistent-data" aria-hidden="true" class="header-anchor">#</a> Remove SiteWhere Persistent Data</h3> <p>In order to remove all SiteWhere data and start with a clean system, you need remove the
<a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noopener noreferrer">persistent volume claims<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
that the SiteWhere infrastructure components create. The following commands may be
used to delete data added by the default SiteWhere configuration:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl delete pvc -l release<span class="token operator">=</span>sitewhere
</code></pre></div><h2 id="uninstall-rook"><a href="#uninstall-rook" aria-hidden="true" class="header-anchor">#</a> Uninstall Rook</h2> <p>To uninstall Rook and the Ceph components it wraps, refer to this
<a href="https://rook.io/docs/rook/v0.8/ceph-teardown.html" target="_blank" rel="noopener noreferrer">document<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and
follow the instructions to remove the components and related data.</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>To delete the persistent data associated with SiteWhere, it is not necessary
to uninstall Rook. As detailed above, the k8s persistence claims may be
deleted to remove existing data and start with a clean system.</p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sitewhere/sitewhere-documentation/edit/sitewhere-2.1.1/docs/deployment/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/30/2020, 6:19:11 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/docs/2.1.1/assets/js/app.51b9d434.js" defer></script><script src="/docs/2.1.1/assets/js/10.8b0bf471.js" defer></script><script src="/docs/2.1.1/assets/js/8.097090a1.js" defer></script><script src="/docs/2.1.1/assets/js/3.a492a356.js" defer></script>
  </body>
</html>
