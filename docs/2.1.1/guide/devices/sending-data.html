<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sending Data to SiteWhere | SiteWhere CE 2.1.1 Documentation</title>
    <meta name="description" content="SiteWhere CE 2.1.1 Documentation">
    <link rel="icon" href="/docs/2.1.1/images/favicon.ico">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel='canonical' href='https://sitewhere.io/docs/2.1.1/guide/devices/sending-data.html'>
    
    <link rel="preload" href="/docs/2.1.1/assets/css/0.styles.14c18768.css" as="style"><link rel="preload" href="/docs/2.1.1/assets/js/app.8bc84daa.js" as="script"><link rel="preload" href="/docs/2.1.1/assets/js/124.a89f5437.js" as="script"><link rel="preload" href="/docs/2.1.1/assets/js/8.097090a1.js" as="script"><link rel="prefetch" href="/docs/2.1.1/assets/js/10.8b0bf471.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/100.285e5b6b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/101.e57c3685.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/102.dd4f94a1.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/103.8850daf9.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/104.29dd3b78.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/105.501f544b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/106.85656234.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/107.b8a5f5cb.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/108.dcfcbdf0.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/109.2baf02b6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/11.ade4771f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/110.58bbedea.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/111.cabb4195.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/112.d5efed28.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/113.e0e80c95.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/114.865ccec4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/115.c2046e39.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/116.1cb541ba.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/117.f1b3b710.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/118.e353d613.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/119.ae335fd8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/12.7432bc14.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/120.01f67b76.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/121.907ec686.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/122.552406eb.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/123.b81ec1df.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/125.d5cbc162.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/126.e90d1fe2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/127.9b54a088.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/128.a0b30e6b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/129.278e4b9d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/13.62f96089.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/130.1f0cc733.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/131.6e51a64f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/132.8decb639.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/133.f14f0d7b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/134.5de4d351.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/135.063cab82.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/136.c7f0e8fa.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/137.91967655.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/138.5d4258e5.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/139.f904389b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/14.5b4cc09a.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/140.f0dd6bca.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/141.fe14eff6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/142.deaaab51.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/143.66144ea1.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/144.37c87c24.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/145.2afd4ec2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/146.24415c70.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/147.57b15b92.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/148.601a04f7.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/149.f6f80ea8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/15.804e0916.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/150.4bb17f71.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/151.31b8c1f1.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/152.332d0689.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/153.509c34b6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/16.447b43e8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/17.4110563f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/18.ef51c4c9.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/19.e7c493a3.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/2.df64bad9.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/20.568b41e2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/21.7705adcd.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/22.4553d585.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/23.79efc3e3.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/24.a619b8d2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/25.12bf7485.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/26.d86502a6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/27.0e8363a4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/28.5d825e19.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/29.b6e4d969.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/3.a492a356.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/30.f6ef58a9.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/31.b7a86413.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/32.33fb191d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/33.827846d6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/34.94edeefe.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/35.64edbb06.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/36.e0020ab9.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/37.ec00b8d3.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/38.91efa070.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/39.e5fd4f1f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/4.0e3b3d67.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/40.1253dd2f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/41.2fe40d37.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/42.c1e9a263.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/43.8ffa3b6b.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/44.de7677a7.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/45.67c8a94a.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/46.4b89f323.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/47.8420a082.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/48.10093dda.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/49.7a3c5ff5.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/5.fd856d4d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/50.5be92c00.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/51.76c268e8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/52.045f8e7c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/53.b12fd3f8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/54.4458dd50.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/55.a0f51647.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/56.72e56514.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/57.85c8a94e.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/58.2a9977a6.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/59.b2ff8c9c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/6.86d6feb3.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/60.58d41f00.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/61.135f222a.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/62.9ee923e8.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/63.55844d12.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/64.caf7004e.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/65.ce80fb82.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/66.5fde1f55.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/67.2850bd51.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/68.f92316f1.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/69.3d30bec2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/7.59b54ecb.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/70.b69659dd.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/71.863396f7.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/72.ba567ef0.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/73.09096052.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/74.595e867d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/75.0f8654ed.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/76.94f045cd.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/77.aec39dc3.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/78.7669f871.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/79.a3dde2e0.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/80.1009160c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/81.c94a1eb2.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/82.bf2c0310.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/83.f0869ef4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/84.9308c793.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/85.afa8ff16.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/86.c7852197.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/87.f3e341b0.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/88.0bcb07c7.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/89.15093543.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/9.1b0727d4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/90.afddd8c4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/91.f7ac7eea.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/92.25af447f.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/93.b5a14bd4.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/94.97077f34.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/95.b9c0369d.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/96.63021f2c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/97.b6983289.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/98.d454c37c.js"><link rel="prefetch" href="/docs/2.1.1/assets/js/99.17bc55b5.js">
    <link rel="stylesheet" href="/docs/2.1.1/assets/css/0.styles.14c18768.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/2.1.1/" class="home-link router-link-active"><img src="/docs/2.1.1/images/logo.svg" alt="SiteWhere CE 2.1.1 Documentation" class="logo"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/2.1.1/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.1.1/deployment/" class="nav-link">Installation</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">User Guides</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/architecture/" class="nav-link">Architecture Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/deployment/" class="nav-link">Deployment Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/administration/" class="nav-link">System Administration Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/devices/" class="nav-link router-link-active">Device Interaction Guides</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/microservices/" class="nav-link">Microservice Guides</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/api/" class="nav-link">API Guides</a></li></ul></div></div><div class="nav-item"><a href="/docs/2.1.1/development/" class="nav-link">Development</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/devices/sending-data.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/es/guide/devices/sending-data.html" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/2.1.1/platform/" class="nav-link">Platform</a></div><div class="nav-item"><a href="/docs/2.1.1/deployment/" class="nav-link">Installation</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">User Guides</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/architecture/" class="nav-link">Architecture Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/deployment/" class="nav-link">Deployment Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/administration/" class="nav-link">System Administration Guide</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/devices/" class="nav-link router-link-active">Device Interaction Guides</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/microservices/" class="nav-link">Microservice Guides</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/api/" class="nav-link">API Guides</a></li></ul></div></div><div class="nav-item"><a href="/docs/2.1.1/development/" class="nav-link">Development</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/2.1.1/guide/devices/sending-data.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/2.1.1/es/guide/devices/sending-data.html" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/sitewhere/sitewhere-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/docs/2.1.1/guide/devices/sending-data.html" class="active sidebar-link">Sending Data to SiteWhere</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/2.1.1/guide/devices/sending-data.html#sending-device-data" class="sidebar-link">Sending Device Data</a></li></ul></li><li><a href="/docs/2.1.1/guide/devices/android.html" class="sidebar-link">SiteWhere Android SDK Programming</a></li><li><a href="/docs/2.1.1/guide/devices/kura.html" class="sidebar-link">SiteWhere Kura Programming</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="sending-data-to-sitewhere"><a href="#sending-data-to-sitewhere" aria-hidden="true" class="header-anchor">#</a> Sending Data to SiteWhere</h1> <span></span> <p>SiteWhere is designed to be flexible in the way that it sends and receives data from devices and other agents.
Most popular communication protocols and encodings are supported out-of-the-box, but the system is also designed
to be easily extended. Each system tenant can have any number of protocols configured for communicating with
devices. By default, tenants are configured to communicate over MQTT with support for multiple encodings
to allow for interactions with many types of devices.</p> <h2 id="sending-device-data"><a href="#sending-device-data" aria-hidden="true" class="header-anchor">#</a> Sending Device Data</h2> <h3 id="json-packet-format"><a href="#json-packet-format" aria-hidden="true" class="header-anchor">#</a> JSON Packet Format</h3> <p>The following sections show examples of JSON data structured to interact with SiteWhere. All JSON packets share
some common information as shown below:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;deviceToken&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(unique device token)&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(indicator for request type)&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;originator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(originator of the message)&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>deviceToken</td> <td>Device token that uniquely identifies a device within a tenant. This informs the system which device is generating events.</td></tr> <tr><td>type</td> <td>The type of request for the device. This indicates how the data in the <em>request</em> section should be interpreted.</td></tr> <tr><td>originator</td> <td>This field is used by devices if they are sending an event in response to a command, indicating the <em>id</em> of the command.</td></tr> <tr><td>request</td> <td>The request content which is specific to the type of packet being sent as indicated by the <em>type</em> field.</td></tr></tbody></table> <h3 id="sending-device-data-using-profocol-buffer"><a href="#sending-device-data-using-profocol-buffer" aria-hidden="true" class="header-anchor">#</a> Sending Device Data Using Profocol Buffer</h3> <div class="language-groovy extra-class"><pre class="language-groovy"><code>compile group<span class="token punctuation">:</span> <span class="token string">'com.sitewhere'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'sitewhere-device-protobuf'</span><span class="token punctuation">,</span> version<span class="token punctuation">:</span><span class="token string">'2.0.1'</span>
</code></pre></div><h3 id="registering-a-device"><a href="#registering-a-device" aria-hidden="true" class="header-anchor">#</a> Registering a Device</h3> <p>Before devices can send event data, they must be registered with the system. SiteWhere will send back a
response on the system command channel to indicate whether the device could be registered. It will also
indicate if the device was already registered or not.</p> <h4 id="registering-a-device-with-json"><a href="#registering-a-device-with-json" aria-hidden="true" class="header-anchor">#</a> Registering a Device with JSON</h4> <p>The JSON packet below can be used to register a device:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RegisterDevice&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;deviceToken&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mydevicetoken&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;originator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;device&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;areaToken&quot;</span><span class="token operator">:</span> <span class="token string">&quot;southeast&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;customerToken&quot;</span><span class="token operator">:</span> <span class="token string">&quot;acme&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;deviceTypeToken&quot;</span><span class="token operator">:</span> <span class="token string">&quot;raspberrypi&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;val1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;val2&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>type</td> <td><code>RegisterDevice</code></td></tr> <tr><td>areaToken</td> <td>A token that specifies the <code>Area</code> being registered.</td></tr> <tr><td>customerToken</td> <td>A token that specifies the <code>Customer</code> being registered</td></tr> <tr><td>deviceTypeToken</td> <td>A token that specifiies the <code>Device Type</code> being registered</td></tr> <tr><td>metadata</td> <td>The metadata of the device being registered</td></tr></tbody></table> <h4 id="registering-a-device-with-protocol-buffer"><a href="#registering-a-device-with-protocol-buffer" aria-hidden="true" class="header-anchor">#</a> Registering a Device with Protocol Buffer</h4> <p>The Protocol Buffer packet below can be used to register a device:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> com<span class="token punctuation">.</span>sitewhere<span class="token punctuation">.</span>communication<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>proto<span class="token punctuation">.</span>SiteWhere<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>sitewhere<span class="token punctuation">.</span>communication<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>proto<span class="token punctuation">.</span>SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Command<span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">// Header</span>
SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Header<span class="token punctuation">.</span>Builder headerBuilder <span class="token operator">=</span> SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Command</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>Command<span class="token punctuation">.</span>SendRegistration<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Device Token</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setDeviceToken</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;mydevicetoken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Originator</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setOriginator</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;originator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Payload</span>
SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceRegistrationRequest<span class="token punctuation">.</span>Builder builder <span class="token operator">=</span>
  SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceRegistrationRequest<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

builder<span class="token punctuation">.</span><span class="token function">getAreaTokenBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;myareatoken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">getCustomerTokenBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;mycustomertoken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">getDeviceTypeTokenBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;mydevicetoken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">putAllMetadata</span><span class="token punctuation">(</span>myMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>

SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceRegistrationRequest payload <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="send-device-measurement"><a href="#send-device-measurement" aria-hidden="true" class="header-anchor">#</a> Send Device Measurement</h3> <p>SiteWhere supports storing measurements related to a device as event data.</p> <h4 id="send-device-measurement-with-json"><a href="#send-device-measurement-with-json" aria-hidden="true" class="header-anchor">#</a> Send Device Measurement with JSON</h4> <p>The JSON format for sending a device measurement is shown below:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DeviceMeasurement&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;originator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;device&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;deviceToken&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mydevicetoken&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;temp&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;34.7&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;updateState&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eventDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-11-21T22:10:13.418-0300&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;val1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;val2&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>type</td> <td><code>DeviceMeasurement</code></td></tr> <tr><td>name</td> <td>Name of the measurement being send.</td></tr> <tr><td>value</td> <td>Value of the measurement being send.</td></tr> <tr><td>updateState</td> <td>if <code>true</code>, it updates the <code>DeviceState</code> of the Assignement</td></tr> <tr><td>eventDate</td> <td>Timestamp of the event.</td></tr> <tr><td>metadata</td> <td>The metadata of the event.</td></tr></tbody></table> <h4 id="send-device-measurement-with-protocol-buffers"><a href="#send-device-measurement-with-protocol-buffers" aria-hidden="true" class="header-anchor">#</a> Send Device Measurement with Protocol Buffers</h4> <p>The Protocol Buffers format for sending a device measurement is shown below:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> com<span class="token punctuation">.</span>sitewhere<span class="token punctuation">.</span>communication<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>proto<span class="token punctuation">.</span>SiteWhere<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>sitewhere<span class="token punctuation">.</span>communication<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>proto<span class="token punctuation">.</span>SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Command<span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">// Header</span>
SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Header<span class="token punctuation">.</span>Builder headerBuilder <span class="token operator">=</span> SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Command</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>Command<span class="token punctuation">.</span>SendMeasurement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Device Token</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setDeviceToken</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;mydevicetoken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Originator</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setOriginator</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;originator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Payload</span>
SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceMeasurement<span class="token punctuation">.</span>Builder builder <span class="token operator">=</span> SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceMeasurement<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setEventDate</span><span class="token punctuation">(</span>GOptionalFixed64<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setMeasurementName</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;temp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setMeasurementValue</span><span class="token punctuation">(</span>GOptionalDouble<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">34.7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceMeasurement payload <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="send-device-location"><a href="#send-device-location" aria-hidden="true" class="header-anchor">#</a> Send Device Location</h3> <p>SiteWhere supports storing locations related to a device as event data.</p> <h4 id="send-device-location-with-json"><a href="#send-device-location-with-json" aria-hidden="true" class="header-anchor">#</a> Send Device Location with JSON</h4> <p>The JSON format for sending a device locacation is shown below:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DeviceLocation&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;originator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;device&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;deviceToken&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mydevicetoken&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token string">&quot;33.75&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token string">&quot;-84.39&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;elevation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;updateState&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eventDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-11-03T19:40:03.390Z&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>type</td> <td><code>DeviceLocation</code></td></tr> <tr><td>latitude</td> <td>Latitud of the Location being send.</td></tr> <tr><td>longitude</td> <td>Longitud of the Location being send.</td></tr> <tr><td>elevation</td> <td>Elevation of the Location being send.</td></tr> <tr><td>updateState</td> <td>if <code>true</code>, it updates the <code>DeviceState</code> of the Assignement</td></tr> <tr><td>eventDate</td> <td>Timestamp of the event.</td></tr> <tr><td>metadata</td> <td>The metadata of the event.</td></tr></tbody></table> <h4 id="send-device-location-with-protocol-buffers"><a href="#send-device-location-with-protocol-buffers" aria-hidden="true" class="header-anchor">#</a> Send Device Location with Protocol Buffers</h4> <p>The Protocol Buffers format for sending a device locacation is shown below:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> com<span class="token punctuation">.</span>sitewhere<span class="token punctuation">.</span>communication<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>proto<span class="token punctuation">.</span>SiteWhere<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>sitewhere<span class="token punctuation">.</span>communication<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>proto<span class="token punctuation">.</span>SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Command<span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">// Header</span>
SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Header<span class="token punctuation">.</span>Builder headerBuilder <span class="token operator">=</span> SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Command</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>Command<span class="token punctuation">.</span>SendLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Device Token</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setDeviceToken</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;mydevicetoken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Originator</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setOriginator</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;originator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Payload</span>
SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceMeasurement<span class="token punctuation">.</span>Builder builder <span class="token operator">=</span> SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceMeasurement<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setEventDate</span><span class="token punctuation">(</span>GOptionalFixed64<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setMeasurementName</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;temp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setMeasurementValue</span><span class="token punctuation">(</span>GOptionalDouble<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">34.7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceMeasurement payload <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="sending-device-alert"><a href="#sending-device-alert" aria-hidden="true" class="header-anchor">#</a> Sending Device Alert</h3> <p>SiteWhere supports storing alerts for exceptional conditions as event data.</p> <h4 id="sending-device-alert-with-json"><a href="#sending-device-alert-with-json" aria-hidden="true" class="header-anchor">#</a> Sending Device Alert with JSON</h4> <p>The JSON format for sending a device alert is shown below:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DeviceAlert&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;originator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;device&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;deviceToken&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mydevicetoken&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Warning&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Engine overheat.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eventDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-11-03T19:40:03.390Z&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>type</td> <td><code>DeviceAlert</code></td></tr> <tr><td>type</td> <td>Type of the Alter <code>Info</code>,<code>Warning</code>,<code>Error</code>,<code>Fatal</code></td></tr> <tr><td>message</td> <td>Message assosiated with the Alert.</td></tr> <tr><td>eventDate</td> <td>Timestamp of the event.</td></tr> <tr><td>metadata</td> <td>The metadata of the event.</td></tr></tbody></table> <h4 id="send-device-alert-with-protocol-buffers"><a href="#send-device-alert-with-protocol-buffers" aria-hidden="true" class="header-anchor">#</a> Send Device Alert with Protocol Buffers</h4> <p>The Protocol Buffers format for sending a device alert is shown below:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> com<span class="token punctuation">.</span>sitewhere<span class="token punctuation">.</span>communication<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>proto<span class="token punctuation">.</span>SiteWhere<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>sitewhere<span class="token punctuation">.</span>communication<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>proto<span class="token punctuation">.</span>SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Command<span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">// Header</span>
SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Header<span class="token punctuation">.</span>Builder headerBuilder <span class="token operator">=</span> SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Command</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>Command<span class="token punctuation">.</span>SendAlert<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Device Token</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setDeviceToken</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;mydevicetoken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Originator</span>
headerBuilder<span class="token punctuation">.</span><span class="token function">setOriginator</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;originator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Payload</span>
SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceAlert<span class="token punctuation">.</span>Builder builder <span class="token operator">=</span> SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceAlert<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setEventDate</span><span class="token punctuation">(</span>GOptionalFixed64<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setAlertType</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;Warning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setAlertMessage</span><span class="token punctuation">(</span>GOptionalString<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;Engine overheat.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SiteWhere<span class="token punctuation">.</span>DeviceEvent<span class="token punctuation">.</span>DeviceAlert payload <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sitewhere/sitewhere-documentation/edit/sitewhere-2.1.1/docs/guide/devices/sending-data.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/12/2019, 7:54:21 PM</span></div></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/docs/2.1.1/guide/devices/android.html">
          SiteWhere Android SDK Programming
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/docs/2.1.1/assets/js/app.8bc84daa.js" defer></script><script src="/docs/2.1.1/assets/js/124.a89f5437.js" defer></script><script src="/docs/2.1.1/assets/js/8.097090a1.js" defer></script>
  </body>
</html>
